{% extends "core/docs/base_docs.html" %}
{% load i18n %}
{% block doc_title %}SMTP Server{% endblock %}
{% block doc_content %}
<h1 class="text-3xl font-bold text-gray-900 mb-6">{% trans "SMTP Server" %}</h1>
<div class="prose max-w-none">
  <p class="text-lg text-gray-600 mb-6">{% trans "DripEmails includes a built-in SMTP server for handling email delivery." %}</p>
  <h2 class="text-2xl font-bold text-gray-900 mb-4">{% trans "Starting the SMTP Server" %}</h2>
  <h3 class="text-xl font-semibold text-gray-900 mb-3">{% trans "Development" %}</h3>
  <pre class="bg-gray-800 text-gray-100 p-4 rounded overflow-x-auto mb-6"><code># Basic (default port 1025)
python manage.py run_smtp_server

# Custom port
python manage.py run_smtp_server --port 2525

# With debug logging
python manage.py run_smtp_server --debug

# No authentication
python manage.py run_smtp_server --no-auth</code></pre>
  <h3 class="text-xl font-semibold text-gray-900 mb-3">{% trans "Production" %}</h3>
  <p class="text-gray-700 mb-4">Use Supervisord or Systemd for process management. See <a href="{% url 'core:docs_deployment_production' %}{% if agent %}?agent={{ agent }}{% endif %}" class="text-indigo-600 hover:underline">Production Setup</a> for details.</p>
  <h2 class="text-2xl font-bold text-gray-900 mb-4">{% trans "Configuration" %}</h2>
  <h3 class="text-xl font-semibold text-gray-900 mb-3">{% trans "Port Selection" %}</h3>
  <ul class="list-disc pl-6 text-gray-700 space-y-2 mb-6">
    <li><strong>1025:</strong> Default (recommended for development, avoids Postfix conflicts)</li>
    <li><strong>25:</strong> Standard SMTP port (requires root/admin, may conflict with Postfix)</li>
    <li><strong>2525:</strong> Alternative port (no conflicts)</li>
  </ul>
  <h3 class="text-xl font-semibold text-gray-900 mb-3">{% trans "Authentication" %}</h3>
  <div class="bg-blue-50 border-l-4 border-blue-500 p-6 mb-6">
    <h4 class="text-lg font-semibold text-blue-900 mb-2">{% trans "ğŸ’¡ Auto-Disable on Windows" %}</h4>
    <p class="text-blue-800">{% trans "On Windows with DEBUG=True, authentication is automatically disabled for easier development." %}</p>
  </div>
  <pre class="bg-gray-800 text-gray-100 p-4 rounded overflow-x-auto mb-6"><code># Disable authentication (development)
python manage.py run_smtp_server --no-auth

# Enable authentication (production)
python manage.py run_smtp_server  # auth enabled by default</code></pre>
  <h2 class="text-2xl font-bold text-gray-900 mb-4">{% trans "Features" %}</h2>
  <div class="grid md:grid-cols-2 gap-6 mb-6">
    <div class="bg-white border-2 border-gray-200 rounded-lg p-6">
      <h3 class="text-lg font-semibold mb-2">{% trans "ğŸš€ Async Performance" %}</h3>
      <p class="text-gray-700">{% trans "Built with aiosmtpd for high-performance email handling" %}</p>
    </div>
    <div class="bg-white border-2 border-gray-200 rounded-lg p-6">
      <h3 class="text-lg font-semibold mb-2">{% trans "ğŸ” Authentication" %}</h3>
      <p class="text-gray-700">{% trans "PLAIN and LOGIN authentication support" %}</p>
    </div>
    <div class="bg-white border-2 border-gray-200 rounded-lg p-6">
      <h3 class="text-lg font-semibold mb-2">{% trans "ğŸ’¾ Database Storage" %}</h3>
      <p class="text-gray-700">{% trans "Automatic email storage in database" %}</p>
    </div>
    <div class="bg-white border-2 border-gray-200 rounded-lg p-6">
      <h3 class="text-lg font-semibold mb-2">{% trans "ğŸ“ Logging" %}</h3>
      <p class="text-gray-700">{% trans "File-based logging for monitoring" %}</p>
    </div>
  </div>
  <h2 class="text-2xl font-bold text-gray-900 mb-4">{% trans "Testing" %}</h2>
  <pre class="bg-gray-800 text-gray-100 p-4 rounded overflow-x-auto mb-6"><code># Test connection
telnet localhost 1025

# Test from Django shell
python manage.py shell
>>> from django.core.mail import send_mail
>>> send_mail('Test', 'Test message', 'from@example.com', ['to@example.com'])</code></pre>
  <h2 class="text-2xl font-bold text-gray-900 mb-4">{% trans "Troubleshooting" %}</h2>
  <p class="text-gray-700 mb-4">See <a href="{% url 'core:docs_deployment_troubleshooting' %}{% if agent %}?agent={{ agent }}{% endif %}" class="text-indigo-600 hover:underline">Deployment Troubleshooting</a> for common SMTP server issues.</p>
</div>
{% endblock %}

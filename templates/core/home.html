{% extends "base.html" %}
{% load i18n %}

{% block title %}{{ site_name }} - {% trans "Free Drip Email Marketing Automation" %}{% endblock %}

{% block content %}
<div class="min-h-screen bg-white">
    <!-- Logged In Message -->
    {% if user.is_authenticated %}
    <div class="bg-indigo-600 text-white">
        <div class="max-w-7xl mx-auto py-3 px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <svg class="h-5 w-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <p class="text-sm font-medium">
                        {% blocktrans with username=user.username %}
                            You are logged in as <strong>{{ username }}</strong>.
                        {% endblocktrans %}
                    </p>
                </div>
                <a href="{% url 'core:dashboard' %}{% if agent %}?agent={{ agent }}{% endif %}" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-indigo-600 bg-white hover:bg-indigo-50 transition-colors">
                    {% trans "Go to Dashboard" %}
                    <svg class="ml-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </a>
            </div>
        </div>
    </div>
    {% endif %}
    
    <!-- Hero Section -->
    <div class="relative overflow-hidden bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-500">
        <!-- Animated Background Elements -->
        <div class="absolute inset-0 overflow-hidden">
            <div class="absolute -top-40 -right-40 w-80 h-80 bg-purple-300 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob"></div>
            <div class="absolute -bottom-40 -left-40 w-80 h-80 bg-yellow-300 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"></div>
            <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-pink-300 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"></div>
        </div>
        
        <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-32 sm:pt-24 sm:pb-40">
            <div class="text-center">
                <!-- Badge -->
                <div class="inline-flex items-center px-4 py-2 mb-8 bg-white/10 backdrop-blur-sm rounded-full border border-white/20">
                    <svg class="w-5 h-5 mr-2 text-yellow-300" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                    </svg>
                    <span class="text-white text-sm font-medium">{% trans "100% Free Forever â€¢ No Credit Card Required" %}</span>
                </div>
                
                <h1 class="text-5xl sm:text-6xl lg:text-7xl font-extrabold text-white mb-6 leading-tight">
                    <span class="block">{% trans "Turn Visitors Into" %}</span>
                    <span class="block bg-gradient-to-r from-yellow-300 to-pink-300 bg-clip-text text-transparent">
                        {% trans "Loyal Customers" %}
                    </span>
                </h1>
                
                <div class="mt-6 max-w-3xl mx-auto text-base sm:text-lg text-indigo-100 leading-relaxed max-h-32 overflow-y-scroll pr-2" style="scrollbar-width: thin; scrollbar-color: rgba(255, 255, 255, 0.3) transparent;">
                    <p>
                        {% trans "The best free drip email marketing software for automated email sequences, email campaigns, and email marketing automation. Create powerful email drip campaigns, nurture leads with automated email sequences, and drive conversions with our email marketing platform. Perfect for SaaS email marketing, ecommerce email marketing, B2B email marketing, and small business email marketing. Set up your email automation in minutes - completely free email marketing software with unlimited campaigns, unlimited subscribers, and unlimited drip emails." %}
                    </p>
                </div>
                
                <!-- CTA Buttons -->
                <div class="mt-10 flex flex-col sm:flex-row gap-4 justify-center items-center">
                    <a href="{% url 'account_signup' %}{% if agent %}?agent={{ agent }}{% endif %}" class="group relative px-8 py-4 bg-white text-indigo-600 font-bold text-lg rounded-xl shadow-2xl hover:shadow-3xl transform hover:-translate-y-1 transition-all duration-300 flex items-center">
                        <span>{% trans "Start Free Today" %}</span>
                        <svg class="ml-2 w-5 h-5 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                        </svg>
                    </a>
                    <a href="{% url 'account_login' %}{% if agent %}?agent={{ agent }}{% endif %}" class="px-8 py-4 bg-white/10 backdrop-blur-sm text-white font-semibold text-lg rounded-xl border-2 border-white/30 hover:bg-white/20 transition-all duration-300">
                        {% trans "Sign In" %}
                    </a>
                </div>
                
                <!-- Trust Indicators -->
                <div class="mt-16 flex flex-wrap justify-center items-center gap-8 text-white/80">
                    <div class="flex items-center">
                        <svg class="w-5 h-5 mr-2 text-green-300" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                        <span class="text-sm">{% trans "Unlimited Campaigns" %}</span>
                    </div>
                    <div class="flex items-center">
                        <svg class="w-5 h-5 mr-2 text-green-300" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                        <span class="text-sm">{% trans "Unlimited Drip Emails" %}</span>
                    </div>
                    <div class="flex items-center">
                        <svg class="w-5 h-5 mr-2 text-green-300" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                        <span class="text-sm">{% trans "Unlimited Subscribers" %}</span>
                    </div>
                    <div class="flex items-center">
                        <svg class="w-5 h-5 mr-2 text-green-300" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                        <span class="text-sm">{% trans "No Credit Card" %}</span>
                    </div>
                    <div class="flex items-center">
                        <svg class="w-5 h-5 mr-2 text-green-300" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                        <span class="text-sm">{% trans "Setup in 5 Minutes" %}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Auto-Reply Feature Section -->
    <div class="relative -mt-20 z-10 mb-24">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50 rounded-3xl shadow-2xl p-8 sm:p-12 md:p-16 border-2 border-emerald-200 overflow-hidden relative">
                <!-- Decorative Elements -->
                <div class="absolute top-0 right-0 w-96 h-96 bg-emerald-200 rounded-full -mr-48 -mt-48 opacity-20"></div>
                <div class="absolute bottom-0 left-0 w-80 h-80 bg-teal-200 rounded-full -ml-40 -mb-40 opacity-20"></div>
                
                <div class="relative z-10">
                    <!-- Badge -->
                    <div class="inline-flex items-center px-4 py-2 mb-6 bg-emerald-100 rounded-full border border-emerald-300">
                        <svg class="w-5 h-5 mr-2 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                        </svg>
                        <span class="text-emerald-800 text-sm font-bold">{% trans "NEW FEATURE" %}</span>
                    </div>
                    
                    <!-- Main Content -->
                    <div class="grid md:grid-cols-2 gap-12 items-center">
                        <!-- Left Side - Text Content -->
                        <div>
                            <h2 class="text-4xl sm:text-5xl lg:text-6xl font-extrabold text-gray-900 mb-6 leading-tight">
                                <span class="block">{% trans "Never Miss a" %}</span>
                                <span class="block bg-gradient-to-r from-emerald-600 to-teal-600 bg-clip-text text-transparent">
                                    {% trans "Conversation Again" %}
                                </span>
                            </h2>
                            
                            <p class="text-xl text-gray-700 mb-8 leading-relaxed">
                                {% trans "Connect your Gmail or IMAP account and let our intelligent auto-reply system respond to every email in your inbox and sent box. Engage with your contacts automatically with personalized messages like:" %}
                            </p>
                            
                            <!-- Quote Box -->
                            <div class="bg-white rounded-2xl p-6 mb-8 shadow-lg border-l-4 border-emerald-500">
                                <div class="flex items-start">
                                    <svg class="w-8 h-8 text-emerald-500 mr-4 flex-shrink-0 mt-1" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                                    </svg>
                                    <div>
                                        <p class="text-2xl font-bold text-gray-900 mb-2">
                                            "{% trans "Hi, did you have any questions?" %}"
                                        </p>
                                        <p class="text-gray-600">
                                            {% trans "Automatically sent to every contact who emails you" %}
                                        </p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Feature List -->
                            <div class="space-y-4 mb-8">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-emerald-500 rounded-lg flex items-center justify-center mr-4 flex-shrink-0">
                                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 class="font-bold text-gray-900">{% trans "Auto-Reply to Inbox" %}</h3>
                                        <p class="text-gray-600 text-sm">{% trans "Automatically respond to incoming emails with personalized messages" %}</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-teal-500 rounded-lg flex items-center justify-center mr-4 flex-shrink-0">
                                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 class="font-bold text-gray-900">{% trans "Auto-Reply to Sent Box" %}</h3>
                                        <p class="text-gray-600 text-sm">{% trans "Follow up with recipients of your sent emails automatically" %}</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-cyan-500 rounded-lg flex items-center justify-center mr-4 flex-shrink-0">
                                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 class="font-bold text-gray-900">{% trans "Smart Personalization" %}</h3>
                                        <p class="text-gray-600 text-sm">{% trans "Uses recipient names and email context for natural conversations" %}</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-emerald-500 rounded-lg flex items-center justify-center mr-4 flex-shrink-0">
                                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 class="font-bold text-gray-900">{% trans "Gmail & IMAP Support" %}</h3>
                                        <p class="text-gray-600 text-sm">{% trans "Works with Gmail, Outlook, and any IMAP email provider" %}</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Quick Setup Forms (for non-authenticated users) -->
                            {% if not user.is_authenticated %}
                            <div class="bg-white rounded-2xl p-6 shadow-lg border-2 border-emerald-200 mb-6">
                                <h3 class="text-xl font-bold text-gray-900 mb-4">{% trans "Get Started in 60 Seconds" %}</h3>
                                <p class="text-sm text-gray-600 mb-4">{% trans "Connect your email account and start auto-replying immediately" %}</p>
                                <a href="{% url 'account_signup' %}{% if agent %}?agent={{ agent }}{% endif %}" class="mb-4 inline-flex items-center px-4 py-2 border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:border-gray-400 hover:bg-gray-50 transition-all duration-300 group">
                                    {% trans "Signup without Gmail or IMAP" %}
                                    <svg class="ml-2 w-4 h-4 group-hover:translate-x-0.5 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                                    </svg>
                                </a>
                                <!-- Gmail OAuth Button -->
                                <div class="mb-6">
                                    <button type="button" id="home-gmail-connect" 
                                            class="w-full px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:border-gray-400 hover:shadow-md transform hover:-translate-y-0.5 transition-all duration-300 flex items-center justify-center">
                                        <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-2.023 2.309-3.178 3.927-1.964L5.455 4.64 12 9.548l6.545-4.91 1.528-1.145C21.69 2.28 24 3.434 24 5.457z"/>
                                        </svg>
                                        <span>{% trans "Connect with Gmail" %}</span>
                                    </button>
                                </div>
                                
                                <!-- Divider -->
                                <div class="relative mb-6">
                                    <div class="absolute inset-0 flex items-center">
                                        <div class="w-full border-t border-gray-300"></div>
                                    </div>
                                    <div class="relative flex justify-center text-sm">
                                        <span class="px-2 bg-white text-gray-500">{% trans "OR" %}</span>
                                    </div>
                                </div>
                                
                                <!-- IMAP Form -->
                                <form id="home-imap-form" class="space-y-4">
                                    {% csrf_token %}
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">{% trans "Email Address" %}</label>
                                            <input type="email" id="home-imap-email" name="email" required 
                                                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">{% trans "IMAP Host" %}</label>
                                            <input type="text" id="home-imap-host" name="host" placeholder="imap.example.com" required 
                                                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500">
                                        </div>
                                    </div>
                                    <!-- Gmail App Password Notice -->
                                    <div id="home-gmail-app-password-notice" class="bg-blue-50 border-l-4 border-blue-400 p-4 rounded-r-lg hidden">
                                        <div class="flex items-start">
                                            <div class="flex-shrink-0">
                                                <svg class="h-5 w-5 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                                                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
                                                </svg>
                                            </div>
                                            <div class="ml-3 flex-1">
                                                <p class="text-sm text-blue-700">
                                                    {% blocktrans %}If you're using <strong>imap.gmail.com</strong> for your IMAP settings, you may need an app password for your account.{% endblocktrans %}
                                                    <a href="https://myaccount.google.com/apppasswords{% if agent %}?agent={{ agent }}{% endif %}" target="_blank" rel="noopener noreferrer" class="font-semibold text-blue-800 hover:text-blue-900 underline ml-1">
                                                        {% trans "Click here to create an app password" %}
                                                    </a>
                                                    <span class="text-blue-600">{% trans "(make sure you are signed in to the email account you need an IMAP connection for)" %}</span>.
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">{% trans "IMAP Port" %}</label>
                                            <input type="number" id="home-imap-port" name="port" placeholder="993" value="993" required 
                                                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">{% trans "Username" %}</label>
                                            <input type="text" id="home-imap-username" name="username" required 
                                                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500">
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">{% trans "IMAP Password" %}</label>
                                        <input type="password" id="home-imap-password" name="password" required 
                                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500">
                                    </div>
                                    <div class="flex items-center">
                                        <input type="checkbox" id="home-imap-use-ssl" name="use_ssl" checked 
                                               class="h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded">
                                        <label for="home-imap-use-ssl" class="ml-2 block text-sm text-gray-700">{% trans "Use SSL/TLS" %}</label>
                                    </div>
                                    <div class="flex items-start">
                                        <input type="checkbox" id="home-imap-terms" name="terms_accepted" required
                                               class="mt-1 h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded">
                                        <label for="home-imap-terms" class="ml-2 block text-sm text-gray-700">
                                            {% url 'core:terms' as terms_url %}
                                            {% blocktrans %}I agree to the{% endblocktrans %} <a href="{{ terms_url }}{% if agent %}?agent={{ agent }}{% endif %}" target="_blank" class="text-emerald-600 hover:text-emerald-500 underline">{% trans "Terms of Service" %}</a>
                                        </label>
                                    </div>
                                    <button type="submit" class="w-full px-6 py-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white font-bold rounded-xl hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-300">
                                        {% trans "Start Auto-Replying Now" %}
                                    </button>
                                </form>
                                <div id="home-imap-error" class="mt-4 hidden bg-red-50 border border-red-200 text-red-800 p-3 rounded-md text-sm"></div>
                                <div class="mt-6 pt-6 border-t border-gray-200 text-center">
                                    <a href="{% url 'account_signup' %}{% if agent %}?agent={{ agent }}{% endif %}" class="inline-flex items-center px-4 py-2 border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:border-gray-400 hover:bg-gray-50 transition-all duration-300 group">
                                        {% trans "Signup without Gmail or IMAP" %}
                                        <svg class="ml-2 w-4 h-4 group-hover:translate-x-0.5 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                                        </svg>
                                    </a>
                                </div>
                            </div>
                            {% else %}
                            <!-- CTA Button for authenticated users -->
                            <div class="flex flex-col sm:flex-row gap-4">
                                <a href="{% url 'core:dashboard' %}{% if agent %}?agent={{ agent }}{% endif %}" class="group px-8 py-4 bg-gradient-to-r from-emerald-600 to-teal-600 text-white font-bold text-lg rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 flex items-center justify-center">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                                    </svg>
                                    <span>{% trans "Set Up Auto-Reply" %}</span>
                                    <svg class="ml-2 w-5 h-5 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                                    </svg>
                                </a>
                                <a href="#features" class="px-8 py-4 bg-white text-emerald-600 font-semibold text-lg rounded-xl border-2 border-emerald-200 hover:border-emerald-300 transition-all duration-300 flex items-center justify-center">
                                    {% trans "Learn More" %}
                                </a>
                            </div>
                            {% endif %}
                        </div>
                        
                        <!-- Right Side - Visual/Illustration -->
                        <div class="relative">
                            <!-- Email Preview Cards -->
                            <div class="space-y-6">
                                <!-- Incoming Email Card -->
                                <div class="bg-white rounded-2xl shadow-xl p-6 border-2 border-gray-100 transform hover:scale-105 transition-transform duration-300">
                                    <div class="flex items-center mb-4">
                                        <div class="w-12 h-12 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center text-white font-bold text-lg mr-4">
                                            JD
                                        </div>
                                        <div class="flex-1">
                                            <div class="font-bold text-gray-900">John Doe</div>
                                            <div class="text-sm text-gray-500">john@example.com</div>
                                        </div>
                                        <div class="text-xs text-gray-400">2 min ago</div>
                                    </div>
                                    <div class="mb-3">
                                        <div class="font-semibold text-gray-900 mb-1">{% trans "Question about your service" %}</div>
                                        <div class="text-sm text-gray-600">{% trans "Hi, I'm interested in learning more about..." %}</div>
                                    </div>
                                    <div class="bg-emerald-50 border-l-4 border-emerald-500 p-3 rounded-r-lg">
                                        <div class="text-xs text-emerald-700 font-semibold mb-1">{% trans "Auto-Reply Sent" %}</div>
                                        <div class="text-sm text-emerald-900">"{% trans "Hi John, did you have any questions?" %}"</div>
                                    </div>
                                </div>
                                
                                <!-- Sent Email Card -->
                                <div class="bg-white rounded-2xl shadow-xl p-6 border-2 border-gray-100 transform hover:scale-105 transition-transform duration-300">
                                    <div class="flex items-center mb-4">
                                        <div class="w-12 h-12 bg-gradient-to-br from-purple-400 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-lg mr-4">
                                            SM
                                        </div>
                                        <div class="flex-1">
                                            <div class="font-bold text-gray-900">Sarah Miller</div>
                                            <div class="text-sm text-gray-500">sarah@example.com</div>
                                        </div>
                                        <div class="text-xs text-gray-400">1 hour ago</div>
                                    </div>
                                    <div class="mb-3">
                                        <div class="font-semibold text-gray-900 mb-1">{% trans "Re: Project Proposal" %}</div>
                                        <div class="text-sm text-gray-600">{% trans "Thanks for your email! I'll review..." %}</div>
                                    </div>
                                    <div class="bg-teal-50 border-l-4 border-teal-500 p-3 rounded-r-lg">
                                        <div class="text-xs text-teal-700 font-semibold mb-1">{% trans "Follow-up Sent" %}</div>
                                        <div class="text-sm text-teal-900">"{% trans "Hi Sarah, did you have any questions?" %}"</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Floating Badge -->
                            <div class="absolute -bottom-4 -right-4 bg-gradient-to-r from-emerald-500 to-teal-500 text-white px-6 py-3 rounded-xl shadow-2xl transform rotate-3">
                                <div class="flex items-center">
                                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path>
                                        <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path>
                                    </svg>
                                    <span class="font-bold text-sm">{% trans "24/7 Active" %}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Stats Section -->
    <div class="relative z-10 mb-24">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="bg-white rounded-2xl shadow-2xl p-8 sm:p-12 grid grid-cols-2 md:grid-cols-4 gap-8">
                <div class="text-center">
                    <div class="text-4xl sm:text-5xl font-bold text-indigo-600 mb-2">10x</div>
                    <div class="text-gray-600 text-sm sm:text-base">{% trans "Higher ROI" %}</div>
                </div>
                <div class="text-center">
                    <div class="text-4xl sm:text-5xl font-bold text-indigo-600 mb-2">80%</div>
                    <div class="text-gray-600 text-sm sm:text-base">{% trans "More Engagement" %}</div>
                </div>
                <div class="text-center">
                    <div class="text-4xl sm:text-5xl font-bold text-indigo-600 mb-2">3x</div>
                    <div class="text-gray-600 text-sm sm:text-base">{% trans "Faster Growth" %}</div>
                </div>
                <div class="text-center">
                    <div class="text-4xl sm:text-5xl font-bold text-indigo-600 mb-2">24/7</div>
                    <div class="text-gray-600 text-sm sm:text-base">{% trans "Automation" %}</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Signup Box 1 - After Stats -->
    {% if not user.is_authenticated %}
    <div class="py-12 bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            {% include 'core/includes/signup_box.html' with color_scheme='indigo' %}
        </div>
    </div>
    {% endif %}

    <!-- How It Works Section -->
    <div class="py-24 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-4xl sm:text-5xl font-extrabold text-gray-900 mb-4">
                    {% trans "How to Create Drip Email Campaigns in Minutes" %}
                </h2>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                    {% trans "Setting up email automation and email drip campaigns has never been easier. Our email marketing automation software makes it simple to create automated email sequences, schedule emails, and track email analytics." %}
                </p>
            </div>
            
            <div class="grid md:grid-cols-4 gap-8">
                <div class="text-center">
                    <div class="w-20 h-20 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg">
                        <span class="text-3xl font-bold text-white">1</span>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3">{% trans "Create Your Campaign" %}</h3>
                    <p class="text-gray-600">{% trans "Build your email drip campaign with our intuitive email marketing tool. Choose from beautiful email templates or create custom email marketing campaigns." %}</p>
                </div>
                <div class="text-center">
                    <div class="w-20 h-20 bg-gradient-to-br from-pink-500 to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg">
                        <span class="text-3xl font-bold text-white">2</span>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3">{% trans "Add Email Sequences" %}</h3>
                    <p class="text-gray-600">{% trans "Design automated email sequences with personalized emails. Set up email scheduling, email nurture sequences, and welcome series for your email subscribers." %}</p>
                </div>
                <div class="text-center">
                    <div class="w-20 h-20 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg">
                        <span class="text-3xl font-bold text-white">3</span>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3">{% trans "Manage Subscribers" %}</h3>
                    <p class="text-gray-600">{% trans "Import your email list, segment subscribers with email list management, and organize your email audience. Perfect for email subscriber management and email segmentation." %}</p>
                </div>
                <div class="text-center">
                    <div class="w-20 h-20 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg">
                        <span class="text-3xl font-bold text-white">4</span>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3">{% trans "Track & Optimize" %}</h3>
                    <p class="text-gray-600">{% trans "Monitor email open rates, email click rates, and email engagement with real-time email analytics. Improve email marketing ROI with data-driven insights." %}</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Signup Box 2 - After How It Works -->
    {% if not user.is_authenticated %}
    <div class="py-12 bg-gradient-to-br from-blue-50 via-cyan-50 to-teal-50">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            {% include 'core/includes/signup_box.html' with color_scheme='blue' %}
        </div>
    </div>
    {% endif %}

    <!-- Why Drip Campaigns Section -->
    <div class="py-24 bg-gradient-to-b from-gray-50 to-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-4xl sm:text-5xl font-extrabold text-gray-900 mb-4">
                    {% trans "Why Email Drip Campaigns Work Better Than Single Email Blasts" %}
                </h2>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                    {% trans "Unlike single email blasts, automated drip email campaigns build relationships over time. Email marketing automation helps you send the right email marketing messages at the right time, improving email engagement and email marketing ROI." %}
                </p>
            </div>
            
            <div class="grid md:grid-cols-3 gap-8">
                <!-- Benefit 1 -->
                <div class="bg-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-shadow duration-300 border border-gray-100">
                    <div class="w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center mb-6">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                        </svg>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-3">{% trans "Automated Email Nurturing & Lead Nurturing" %}</h3>
                    <p class="text-gray-600 leading-relaxed">
                        {% trans "Send the right email marketing message at the right time with email automation. Automatically guide leads through your funnel with automated email sequences, email nurture campaigns, and personalized email marketing without manual intervention." %}
                    </p>
                </div>
                
                <!-- Benefit 2 -->
                <div class="bg-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-shadow duration-300 border border-gray-100">
                    <div class="w-16 h-16 bg-gradient-to-br from-pink-500 to-red-600 rounded-xl flex items-center justify-center mb-6">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                        </svg>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-3">{% trans "Email Personalization & Subscriber Segmentation" %}</h3>
                    <p class="text-gray-600 leading-relaxed">
                        {% trans "Create unique email experiences for each subscriber with personalized emails. Use email segmentation and email list management to deliver targeted email marketing campaigns that resonate with your email audience." %}
                    </p>
                </div>
                
                <!-- Benefit 3 -->
                <div class="bg-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-shadow duration-300 border border-gray-100">
                    <div class="w-16 h-16 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-xl flex items-center justify-center mb-6">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                        </svg>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-3">{% trans "Proven Results" %}</h3>
                    <p class="text-gray-600 leading-relaxed">
                        {% trans "Drip campaigns generate 3x more revenue than single emails. See measurable ROI from day one." %}
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Signup Box 3 - After Why Drip Campaigns -->
    {% if not user.is_authenticated %}
    <div class="py-12 bg-gradient-to-br from-purple-50 via-pink-50 to-rose-50">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            {% include 'core/includes/signup_box.html' with color_scheme='purple' %}
        </div>
    </div>
    {% endif %}

    <!-- Features Section -->
    <div id="features" class="py-24 bg-white scroll-mt-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-4xl sm:text-5xl font-extrabold text-gray-900 mb-4">
                    {% trans "Everything You Need to Succeed" %}
                </h2>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                    {% trans "Powerful features that make email marketing effortless" %}
                </p>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8" style="overflow-x:hidden;">
                <!-- Feature 1 -->
                <div class="group relative p-8 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl border border-indigo-100 hover:border-indigo-300 transition-all duration-300 hover:shadow-xl">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-indigo-200 rounded-full -mr-16 -mt-16 opacity-20 group-hover:opacity-30 transition-opacity"></div>
                    <div class="relative">
                        <div class="w-14 h-14 bg-indigo-600 rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform">
                            <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900 mb-3">{% trans "Smart Drip Email Sequences" %}</h3>
                        <p class="text-gray-600 leading-relaxed">
                            {% trans "Create multi-step email sequences that automatically send based on timing, behavior, or triggers." %}
                        </p>
                    </div>
                </div>

                <!-- Feature 2 -->
                <div class="group relative p-8 bg-gradient-to-br from-pink-50 to-red-50 rounded-2xl border border-pink-100 hover:border-pink-300 transition-all duration-300 hover:shadow-xl">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-pink-200 rounded-full -mr-16 -mt-16 opacity-20 group-hover:opacity-30 transition-opacity"></div>
                    <div class="relative">
                        <div class="w-14 h-14 bg-pink-600 rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform">
                            <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900 mb-3">{% trans "Real-Time Analytics" %}</h3>
                        <p class="text-gray-600 leading-relaxed">
                            {% trans "Track opens, clicks, conversions, and revenue. Make data-driven decisions with beautiful dashboards." %}
                        </p>
                    </div>
                </div>

                <!-- Feature 3 -->
                <div class="group relative p-8 bg-gradient-to-br from-yellow-50 to-orange-50 rounded-2xl border border-yellow-100 hover:border-yellow-300 transition-all duration-300 hover:shadow-xl">
                    <div class="relative">
                        <div class="w-14 h-14 bg-yellow-600 rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform">
                            <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"></path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900 mb-3">{% trans "Beautiful Templates" %}</h3>
                        <p class="text-gray-600 leading-relaxed">
                            {% trans "Choose from professional templates or create your own. Drag-and-drop editor makes design easy." %}
                        </p>
                    </div>
                </div>

                <!-- Feature 4 -->
                <div class="group relative p-8 bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl border border-green-100 hover:border-green-300 transition-all duration-300 hover:shadow-xl">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-green-200 rounded-full -mr-16 -mt-16 opacity-20 group-hover:opacity-30 transition-opacity"></div>
                    <div class="relative">
                        <div class="w-14 h-14 bg-green-600 rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform">
                            <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900 mb-3">{% trans "Subscriber Segmentation" %}</h3>
                        <p class="text-gray-600 leading-relaxed">
                            {% trans "Organize subscribers into lists, tag them, and send targeted campaigns to the right audience." %}
                        </p>
                    </div>
                </div>

                <!-- Feature 5 -->
                <div class="group relative p-8 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-2xl border border-blue-100 hover:border-blue-300 transition-all duration-300 hover:shadow-xl">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-blue-200 rounded-full -mr-16 -mt-16 opacity-20 group-hover:opacity-30 transition-opacity"></div>
                    <div class="relative">
                        <div class="w-14 h-14 bg-blue-600 rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform">
                            <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900 mb-3">{% trans "AI-Powered Content" %}</h3>
                        <p class="text-gray-600 leading-relaxed">
                            {% trans "Generate compelling email content with AI. Save time while creating professional, engaging messages." %}
                        </p>
                    </div>
                </div>

                <!-- Feature 6 -->
                <div class="group relative p-8 bg-gradient-to-br from-purple-50 to-indigo-50 rounded-2xl border border-purple-100 hover:border-purple-300 transition-all duration-300 hover:shadow-xl">
                    <div class="relative">
                        <div class="w-14 h-14 bg-purple-600 rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform">
                            <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900 mb-3">{% trans "Enterprise Security" %}</h3>
                        <p class="text-gray-600 leading-relaxed">
                            {% trans "GDPR compliant, secure infrastructure, and reliable delivery. Your data and subscribers are protected." %}
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Signup Box 4 - After Features -->
    {% if not user.is_authenticated %}
    <div class="py-12 bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            {% include 'core/includes/signup_box.html' with color_scheme='emerald' %}
        </div>
    </div>
    {% endif %}

    <!-- Social Proof / Testimonials -->
    <div class="py-24 bg-gradient-to-b from-gray-50 to-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-4xl sm:text-5xl font-extrabold text-gray-900 mb-4">
                    {% trans "Trusted by Growing Businesses" %}
                </h2>
                <p class="text-xl text-gray-600">
                    {% trans "Join thousands of marketers who've transformed their email strategy" %}
                </p>
            </div>
            
            <div class="grid md:grid-cols-3 gap-8">
                <!-- Testimonial 1 -->
                <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-100">
                    <div class="flex items-center mb-6">
                        <div class="flex text-yellow-400">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                        </div>
                    </div>
                    <p class="text-gray-700 mb-6 leading-relaxed">
                        "{% trans "Our conversion rate increased by 340% after implementing drip campaigns. The automation saves us hours every week." %}"
                    </p>
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-gradient-to-br from-indigo-400 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-lg">
                            SM
                        </div>
                        <div class="ml-4">
                            <div class="font-semibold text-gray-900">Sarah Martinez</div>
                            <div class="text-sm text-gray-600">{% trans "Marketing Director" %}</div>
                        </div>
                    </div>
                </div>

                <!-- Testimonial 2 -->
                <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-100">
                    <div class="flex items-center mb-6">
                        <div class="flex text-yellow-400">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                        </div>
                    </div>
                    <p class="text-gray-700 mb-6 leading-relaxed">
                        "{% trans "The best part? It's completely free. We've sent over 50,000 emails without paying a dime. Game changer." %}"
                    </p>
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-gradient-to-br from-pink-400 to-red-500 rounded-full flex items-center justify-center text-white font-bold text-lg">
                            JC
                        </div>
                        <div class="ml-4">
                            <div class="font-semibold text-gray-900">James Chen</div>
                            <div class="text-sm text-gray-600">{% trans "Startup Founder" %}</div>
                        </div>
                    </div>
                </div>

                <!-- Testimonial 3 -->
                <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-100">
                    <div class="flex items-center mb-6">
                        <div class="flex text-yellow-400">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                        </div>
                    </div>
                    <p class="text-gray-700 mb-6 leading-relaxed">
                        "{% trans "Setup took 5 minutes. The interface is intuitive, and the results speak for themselves. Our email engagement doubled." %}"
                    </p>
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-gradient-to-br from-blue-400 to-cyan-500 rounded-full flex items-center justify-center text-white font-bold text-lg">
                            ER
                        </div>
                        <div class="ml-4">
                            <div class="font-semibold text-gray-900">Emily Rodriguez</div>
                            <div class="text-sm text-gray-600">{% trans "E-commerce Manager" %}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Signup Box 5 - After Testimonials -->
    {% if not user.is_authenticated %}
    <div class="py-12 bg-gradient-to-br from-amber-50 via-orange-50 to-yellow-50">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            {% include 'core/includes/signup_box.html' with color_scheme='amber' %}
        </div>
    </div>
    {% endif %}

    <!-- Use Cases Section -->
    <div class="py-24 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-4xl sm:text-5xl font-extrabold text-gray-900 mb-4">
                    {% trans "Perfect Email Marketing Solution for Every Business" %}
                </h2>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                    {% trans "Whether you're running SaaS email marketing, ecommerce email marketing, B2B email marketing, or B2C email marketing campaigns, our free email marketing automation software adapts to your needs." %}
                </p>
            </div>
            
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
                <div class="bg-gradient-to-br from-blue-50 to-indigo-50 p-8 rounded-2xl border-2 border-blue-100 hover:border-blue-300 transition-all hover:shadow-xl">
                    <div class="w-14 h-14 bg-blue-600 rounded-xl flex items-center justify-center mb-6">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3">{% trans "SaaS Email Marketing" %}</h3>
                    <p class="text-gray-600 mb-6">{% trans "Onboard users with automated email sequences, welcome series, and nurture campaigns. Perfect for startup email marketing and software companies." %}</p>
                    <a href="{% url 'account_signup' %}{% if agent %}?agent={{ agent }}{% endif %}" class="inline-flex items-center text-blue-600 font-semibold hover:text-blue-700">
                        {% trans "Start Free" %}
                        <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </a>
                </div>

                <div class="bg-gradient-to-br from-pink-50 to-red-50 p-8 rounded-2xl border-2 border-pink-100 hover:border-pink-300 transition-all hover:shadow-xl">
                    <div class="w-14 h-14 bg-pink-600 rounded-xl flex items-center justify-center mb-6">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3">{% trans "Ecommerce Email Marketing" %}</h3>
                    <p class="text-gray-600 mb-6">{% trans "Drive sales with abandoned cart emails, product recommendations, and transactional emails. Boost your email marketing ROI with targeted campaigns." %}</p>
                    <a href="{% url 'account_signup' %}{% if agent %}?agent={{ agent }}{% endif %}" class="inline-flex items-center text-pink-600 font-semibold hover:text-pink-700">
                        {% trans "Get Started" %}
                        <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </a>
                </div>

                <div class="bg-gradient-to-br from-purple-50 to-indigo-50 p-8 rounded-2xl border-2 border-purple-100 hover:border-purple-300 transition-all hover:shadow-xl">
                    <div class="w-14 h-14 bg-purple-600 rounded-xl flex items-center justify-center mb-6">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3">{% trans "B2B Email Marketing" %}</h3>
                    <p class="text-gray-600 mb-6">{% trans "Nurture leads with email marketing automation, email segmentation, and personalized email campaigns. Perfect for B2B email marketing strategies." %}</p>
                    <a href="{% url 'account_signup' %}{% if agent %}?agent={{ agent }}{% endif %}" class="inline-flex items-center text-purple-600 font-semibold hover:text-purple-700">
                        {% trans "Try Free" %}
                        <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </a>
                </div>

                <div class="bg-gradient-to-br from-green-50 to-emerald-50 p-8 rounded-2xl border-2 border-green-100 hover:border-green-300 transition-all hover:shadow-xl">
                    <div class="w-14 h-14 bg-green-600 rounded-xl flex items-center justify-center mb-6">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3">{% trans "Small Business Email Marketing" %}</h3>
                    <p class="text-gray-600 mb-6">{% trans "Affordable email marketing for small businesses. Free email marketing software with unlimited campaigns, subscribers, and email automation features." %}</p>
                    <a href="{% url 'account_signup' %}{% if agent %}?agent={{ agent }}{% endif %}" class="inline-flex items-center text-green-600 font-semibold hover:text-green-700">
                        {% trans "Sign Up Free" %}
                        <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </a>
                </div>
            </div>

            <div class="text-center mt-12">
                <a href="{% url 'account_signup' %}{% if agent %}?agent={{ agent }}{% endif %}" class="inline-flex items-center px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold text-lg rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300">
                    <span>{% trans "Start Your Free Email Marketing Campaign Today" %}</span>
                    <svg class="ml-2 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                    </svg>
                </a>
            </div>
        </div>
    </div>

    <!-- Signup Box 6 - After Use Cases -->
    {% if not user.is_authenticated %}
    <div class="py-12 bg-gradient-to-br from-violet-50 via-indigo-50 to-purple-50">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            {% include 'core/includes/signup_box.html' with color_scheme='violet' %}
        </div>
    </div>
    {% endif %}

    <!-- Comparison Section -->
    <div class="py-24 bg-gradient-to-b from-gray-50 to-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-4xl sm:text-5xl font-extrabold text-gray-900 mb-4">
                    {% trans "The Best Free Alternative to Paid Email Marketing Tools" %}
                </h2>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                    {% trans "Why pay for Mailchimp, Constant Contact, Sendinblue, or GetResponse when you can get the same email marketing automation features for free? Our email marketing platform offers unlimited email campaigns, unlimited subscribers, and powerful email automation - all at no cost." %}
                </p>
            </div>

            <div class="bg-white rounded-2xl shadow-2xl p-8 md:p-12 mb-12">
                <div class="grid md:grid-cols-2 gap-12">
                    <div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-6">{% trans "Why Choose Our Free Email Marketing Software?" %}</h3>
                        <ul class="space-y-4">
                            <li class="flex items-start">
                                <svg class="w-6 h-6 text-green-500 mr-3 mt-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                                <div>
                                    <strong class="text-gray-900">{% trans "100% Free Forever" %}</strong>
                                    <p class="text-gray-600">{% trans "No hidden fees, no credit card required. Unlike Mailchimp alternative or Constant Contact alternative services, we're completely free email marketing software." %}</p>
                                </div>
                            </li>
                            <li class="flex items-start">
                                <svg class="w-6 h-6 text-green-500 mr-3 mt-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                                <div>
                                    <strong class="text-gray-900">{% trans "Unlimited Everything" %}</strong>
                                    <p class="text-gray-600">{% trans "Unlimited email campaigns, unlimited drip emails, unlimited subscribers, unlimited email automation. No limits on your email marketing growth." %}</p>
                                </div>
                            </li>
                            <li class="flex items-start">
                                <svg class="w-6 h-6 text-green-500 mr-3 mt-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                                <div>
                                    <strong class="text-gray-900">{% trans "Full Email Marketing Automation" %}</strong>
                                    <p class="text-gray-600">{% trans "Complete email automation features: email drip campaigns, email scheduling, email analytics, email tracking, email segmentation, and email personalization." %}</p>
                                </div>
                            </li>
                            <li class="flex items-start">
                                <svg class="w-6 h-6 text-green-500 mr-3 mt-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                                <div>
                                    <strong class="text-gray-900">{% trans "Best Email Marketing Software Features" %}</strong>
                                    <p class="text-gray-600">{% trans "Email templates, email newsletters, email subscriber management, email list management, email open rates tracking, email click rates, and email marketing ROI analytics." %}</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="bg-gradient-to-br from-indigo-50 to-purple-50 p-8 rounded-xl border-2 border-indigo-100">
                        <h3 class="text-2xl font-bold text-gray-900 mb-6">{% trans "Ready to Switch?" %}</h3>
                        <p class="text-gray-700 mb-6 leading-relaxed">
                            {% trans "Join thousands of businesses who've switched from expensive email marketing services to our free email marketing platform. Get started with email automation in minutes - no credit card required." %}
                        </p>
                        <div class="space-y-4">
                            <a href="{% url 'account_signup' %}{% if agent %}?agent={{ agent }}{% endif %}" class="block w-full px-6 py-4 bg-indigo-600 text-white font-bold text-center rounded-xl hover:bg-indigo-700 transition-colors shadow-lg hover:shadow-xl transform hover:-translate-y-1">
                                {% trans "Create Free Account Now" %}
                            </a>
                            <a href="{% url 'account_login' %}{% if agent %}?agent={{ agent }}{% endif %}" class="block w-full px-6 py-4 bg-white text-indigo-600 font-semibold text-center rounded-xl border-2 border-indigo-200 hover:border-indigo-300 transition-colors">
                                {% trans "Already Have an Account? Sign In" %}
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Signup Box 7 - After Comparison -->
    {% if not user.is_authenticated %}
    <div class="py-12 bg-gradient-to-br from-sky-50 via-blue-50 to-indigo-50">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            {% include 'core/includes/signup_box.html' with color_scheme='sky' %}
        </div>
    </div>
    {% endif %}

    <!-- Email Marketing Best Practices Section -->
    <div class="py-24 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-4xl sm:text-5xl font-extrabold text-gray-900 mb-4">
                    {% trans "Email Marketing Best Practices & Tips" %}
                </h2>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                    {% trans "Learn how to improve email open rates, increase email engagement, and maximize your email marketing ROI with proven email marketing strategies and email marketing tips." %}
                </p>
            </div>

            <div class="grid md:grid-cols-3 gap-8 mb-12">
                <div class="bg-gradient-to-br from-yellow-50 to-orange-50 p-8 rounded-2xl border border-yellow-100">
                    <div class="w-12 h-12 bg-yellow-500 rounded-lg flex items-center justify-center mb-6">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3">{% trans "Improve Email Open Rates" %}</h3>
                    <p class="text-gray-600 mb-4">{% trans "Use personalized email subject lines, send emails at optimal times, and segment your email list. Track email open rates with our email analytics to optimize your email marketing campaigns." %}</p>
                    <a href="{% url 'account_signup' %}{% if agent %}?agent={{ agent }}{% endif %}" class="text-yellow-600 font-semibold hover:text-yellow-700 inline-flex items-center">
                        {% trans "Start Tracking Opens" %}
                        <svg class="ml-1 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </a>
                </div>

                <div class="bg-gradient-to-br from-blue-50 to-cyan-50 p-8 rounded-2xl border border-blue-100">
                    <div class="w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center mb-6">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3">{% trans "Increase Email Engagement" %}</h3>
                    <p class="text-gray-600 mb-4">{% trans "Create engaging email content with email personalization, use email automation to send timely messages, and monitor email click rates. Our email marketing automation helps you send the right message at the right time." %}</p>
                    <a href="{% url 'account_signup' %}{% if agent %}?agent={{ agent }}{% endif %}" class="text-blue-600 font-semibold hover:text-blue-700 inline-flex items-center">
                        {% trans "Boost Engagement" %}
                        <svg class="ml-1 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </a>
                </div>

                <div class="bg-gradient-to-br from-green-50 to-emerald-50 p-8 rounded-2xl border border-green-100">
                    <div class="w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center mb-6">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3">{% trans "Maximize Email Marketing ROI" %}</h3>
                    <p class="text-gray-600 mb-4">{% trans "Use email drip campaigns for lead nurturing, implement email segmentation for targeted campaigns, and track email marketing ROI with comprehensive email analytics. Free email marketing software that delivers results." %}</p>
                    <a href="{% url 'account_signup' %}{% if agent %}?agent={{ agent }}{% endif %}" class="text-green-600 font-semibold hover:text-green-700 inline-flex items-center">
                        {% trans "See Your ROI" %}
                        <svg class="ml-1 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </a>
                </div>
            </div>

            <div class="text-center">
                <p class="text-lg text-gray-700 mb-6">{% trans "Ready to implement these email marketing best practices?" %}</p>
                <a href="{% url 'account_signup' %}{% if agent %}?agent={{ agent }}{% endif %}" class="inline-flex items-center px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold text-lg rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300">
                    <span>{% trans "Start Your Email Marketing Journey Free" %}</span>
                    <svg class="ml-2 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                    </svg>
                </a>
            </div>
        </div>
    </div>

    <!-- Signup Box 8 - After Best Practices -->
    {% if not user.is_authenticated %}
    <div class="py-12 bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            {% include 'core/includes/signup_box.html' with color_scheme='green' %}
        </div>
    </div>
    {% endif %}

    <!-- FAQ Section -->
    <div class="py-24 bg-gradient-to-b from-gray-50 to-white">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-4xl sm:text-5xl font-extrabold text-gray-900 mb-4">
                    {% trans "Frequently Asked Questions About Email Marketing" %}
                </h2>
                <p class="text-xl text-gray-600">
                    {% trans "Everything you need to know about drip email campaigns, email automation, and our free email marketing software." %}
                </p>
            </div>

            <div class="space-y-6 mb-12">
                <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-100">
                    <h3 class="text-xl font-bold text-gray-900 mb-3">{% trans "What is a drip email campaign?" %}</h3>
                    <p class="text-gray-600 leading-relaxed">
                        {% trans "A drip email campaign, also known as an automated email sequence or email drip campaign, is a series of automated emails sent to subscribers over time. These email marketing campaigns help nurture leads, onboard users, and drive conversions through strategic email automation. Our email marketing platform makes it easy to create powerful drip email campaigns." %}
                    </p>
                </div>

                <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-100">
                    <h3 class="text-xl font-bold text-gray-900 mb-3">{% trans "How do I create a drip email campaign?" %}</h3>
                    <p class="text-gray-600 leading-relaxed">
                        {% trans "Creating a drip email campaign is simple with our email marketing automation software. Sign up for free, create your email campaign, add email sequences with scheduled emails, and let our email automation handle the rest. You can use our email templates or create custom email marketing campaigns. Get started in minutes!" %}
                    </p>
                    <div class="mt-4">
                        <a href="{% url 'account_signup' %}{% if agent %}?agent={{ agent }}{% endif %}" class="inline-flex items-center text-indigo-600 font-semibold hover:text-indigo-700">
                            {% trans "Create Your First Campaign" %}
                            <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </a>
                    </div>
                </div>

                <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-100">
                    <h3 class="text-xl font-bold text-gray-900 mb-3">{% trans "Is this really free email marketing software?" %}</h3>
                    <p class="text-gray-600 leading-relaxed">
                        {% trans "Yes! Our email marketing platform is 100% free forever. Unlike Mailchimp, Constant Contact, Sendinblue, or GetResponse alternatives, we offer unlimited email campaigns, unlimited subscribers, unlimited drip emails, and full email marketing automation features at no cost. No credit card required, no hidden fees." %}
                    </p>
                </div>

                <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-100">
                    <h3 class="text-xl font-bold text-gray-900 mb-3">{% trans "What email marketing features are included?" %}</h3>
                    <p class="text-gray-600 leading-relaxed">
                        {% trans "Our free email marketing software includes: email drip campaigns, automated email sequences, email scheduling, email analytics and email tracking (email open rates, email click rates), email subscriber management, email list management, email segmentation, email personalization, email templates, email newsletters, and comprehensive email marketing automation. Everything you need for successful email marketing!" %}
                    </p>
                </div>

                <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-100">
                    <h3 class="text-xl font-bold text-gray-900 mb-3">{% trans "How can I improve my email open rates?" %}</h3>
                    <p class="text-gray-600 leading-relaxed">
                        {% trans "Improve email open rates by using personalized email subject lines, sending emails at optimal times, segmenting your email list, and creating engaging email content. Our email analytics tools help you track email open rates and optimize your email marketing campaigns for better performance." %}
                    </p>
                    <div class="mt-4">
                        <a href="{% url 'account_signup' %}{% if agent %}?agent={{ agent }}{% endif %}" class="inline-flex items-center text-indigo-600 font-semibold hover:text-indigo-700">
                            {% trans "Start Improving Opens" %}
                            <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>

            <div class="text-center bg-gradient-to-br from-indigo-600 to-purple-600 rounded-2xl p-12 text-white">
                <h3 class="text-3xl font-bold mb-4">{% trans "Still Have Questions?" %}</h3>
                <p class="text-xl text-indigo-100 mb-8">{% trans "Get started with our free email marketing software and discover how easy email automation can be!" %}</p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <a href="{% url 'account_signup' %}{% if agent %}?agent={{ agent }}{% endif %}" class="px-8 py-4 bg-white text-indigo-600 font-bold rounded-xl hover:bg-indigo-50 transition-colors shadow-lg">
                        {% trans "Sign Up Free" %}
                    </a>
                    <a href="{% url 'account_login' %}{% if agent %}?agent={{ agent }}{% endif %}" class="px-8 py-4 bg-white/10 backdrop-blur-sm text-white font-semibold rounded-xl border-2 border-white/30 hover:bg-white/20 transition-colors">
                        {% trans "Sign In" %}
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Signup Box 9 - After FAQ -->
    {% if not user.is_authenticated %}
    <div class="py-12 bg-gradient-to-br from-rose-50 via-pink-50 to-fuchsia-50">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            {% include 'core/includes/signup_box.html' with color_scheme='rose' %}
        </div>
    </div>
    {% endif %}

    <!-- Final CTA Section -->
    <div class="relative bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-500 overflow-hidden">
        <div class="absolute inset-0 bg-black opacity-10"></div>
        <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24">
            <div class="text-center">
                <h2 class="text-4xl sm:text-5xl font-extrabold text-white mb-6">
                    {% trans "Ready to Transform Your Email Marketing?" %}
                </h2>
                <p class="text-xl text-indigo-100 mb-10 max-w-2xl mx-auto">
                    {% trans "Join thousands of businesses using drip campaigns to grow revenue, nurture leads, and build lasting customer relationships." %}
                </p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <a href="{% url 'account_signup' %}{% if agent %}?agent={{ agent }}{% endif %}" class="group relative px-10 py-5 bg-white text-indigo-600 font-bold text-lg rounded-xl shadow-2xl hover:shadow-3xl transform hover:-translate-y-1 transition-all duration-300 flex items-center justify-center">
                        <span>{% trans "Start Your Free Account" %}</span>
                        <svg class="ml-2 w-5 h-5 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                        </svg>
                    </a>
                    <a href="{% url 'core:feature_drip_campaigns' %}{% if agent %}?agent={{ agent }}{% endif %}" class="px-10 py-5 bg-white/10 backdrop-blur-sm text-white font-semibold text-lg rounded-xl border-2 border-white/30 hover:bg-white/20 transition-all duration-300">
                        {% trans "Learn More" %}
                    </a>
                </div>
                <p class="mt-8 text-indigo-200 text-sm">
                    {% trans "No credit card required â€¢ Setup in 5 minutes â€¢ Cancel anytime" %}
                </p>
            </div>
        </div>
    </div>
</div>

<style>
@keyframes blob {
    0%, 100% {
        transform: translate(0, 0) scale(1);
    }
    33% {
        transform: translate(30px, -50px) scale(1.1);
    }
    66% {
        transform: translate(-20px, 20px) scale(0.9);
    }
}

.animate-blob {
    animation: blob 7s infinite;
}

.animation-delay-2000 {
    animation-delay: 2s;
}

.animation-delay-4000 {
    animation-delay: 4s;
}
</style>

<!-- Password Modal -->
<div id="password-modal" class="hidden fixed inset-0 z-50 overflow-y-auto">
    <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
        <!-- Background overlay -->
        <div class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75" onclick="closePasswordModal()"></div>
        
        <!-- Modal panel -->
        <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
            <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                <div class="sm:flex sm:items-start">
                    <div class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-emerald-100 sm:mx-0 sm:h-10 sm:w-10">
                        <svg class="h-6 w-6 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                        </svg>
                    </div>
                    <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full">
                        <h3 class="text-lg leading-6 font-medium text-gray-900 mb-2">
                            {% trans "Create Your Account" %}
                        </h3>
                        <div class="mt-2">
                            <p class="text-sm text-gray-500 mb-4">
                                {% trans "Your email address will be your username. Please create a password to secure your account:" %}
                            </p>
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-1">{% trans "Email (Username)" %}</label>
                                <input type="email" id="modal-email" readonly 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">{% trans "Password" %}</label>
                                <input type="password" id="modal-password" required 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500"
                                       placeholder="{% trans 'Enter a secure password' %}">
                                <p class="mt-1 text-xs text-gray-500">{% trans "Minimum 8 characters recommended" %}</p>
                            </div>
                            <div class="mt-4 flex items-start">
                                <input type="checkbox" id="modal-terms" required
                                       class="mt-1 h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded">
                                <label for="modal-terms" class="ml-2 block text-sm text-gray-700">
                                    {% url 'core:terms' as terms_url %}
                                    {% blocktrans %}I agree to the{% endblocktrans %} <a href="{{ terms_url }}{% if agent %}?agent={{ agent }}{% endif %}" target="_blank" class="text-emerald-600 hover:text-emerald-500 underline">{% trans "Terms of Service" %}</a>
                                </label>
                            </div>
                            <div id="modal-error" class="mt-3 hidden bg-red-50 border border-red-200 text-red-800 p-2 rounded-md text-sm"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                <button type="button" id="modal-submit-btn" 
                        class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-emerald-600 text-base font-medium text-white hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 sm:ml-3 sm:w-auto sm:text-sm">
                    {% trans "Create Account & Connect" %}
                </button>
                <button type="button" onclick="closePasswordModal()" 
                        class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                    {% trans "Cancel" %}
                </button>
            </div>
        </div>
    </div>
</div>

<script>
let signupData = null;
let signupType = null; // 'gmail' or 'imap'

// Toggle Gmail app password notice based on host input
document.addEventListener('DOMContentLoaded', function() {
    const homeImapHostInput = document.getElementById('home-imap-host');
    const homeGmailAppPasswordNotice = document.getElementById('home-gmail-app-password-notice');
    if (homeImapHostInput && homeGmailAppPasswordNotice) {
        function toggleHomeGmailNotice() {
            const hostValue = homeImapHostInput.value.toLowerCase().trim();
            if (hostValue.includes('imap.gmail.com') || hostValue === 'imap.gmail.com') {
                homeGmailAppPasswordNotice.classList.remove('hidden');
            } else {
                homeGmailAppPasswordNotice.classList.add('hidden');
            }
        }
        homeImapHostInput.addEventListener('input', toggleHomeGmailNotice);
        homeImapHostInput.addEventListener('change', toggleHomeGmailNotice);
        // Check on initial load
        toggleHomeGmailNotice();
    }
});

// Handle Gmail OAuth button clicks (all instances)
document.addEventListener('click', function(e) {
    if (e.target.closest('.signup-gmail-connect')) {
        e.preventDefault();
        // Show email prompt first
        const email = prompt('{% trans "Please enter your Gmail address:" %}');
        if (!email || !email.includes('@')) {
            return;
        }
        
        // Store email and show password modal
        signupData = { email: email };
        signupType = 'gmail';
        
        document.getElementById('modal-email').value = email;
        document.getElementById('password-modal').classList.remove('hidden');
        document.getElementById('modal-password').focus();
    }
});

// Handle IMAP form submissions (all instances)
document.addEventListener('submit', function(e) {
    if (e.target.closest('.signup-imap-form')) {
        e.preventDefault();
        
        const form = e.target.closest('.signup-imap-form');
        const termsCheckbox = form.querySelector('.signup-imap-terms');
        const errorDiv = form.querySelector('.signup-error');
        
        if (!termsCheckbox || !termsCheckbox.checked) {
            if (errorDiv) {
                errorDiv.textContent = '{% trans "You must agree to the Terms of Service to continue" %}';
                errorDiv.classList.remove('hidden');
            }
            return;
        }
        
        const formData = {
            email: form.querySelector('.signup-imap-email').value,
            host: form.querySelector('.signup-imap-host').value,
            port: parseInt(form.querySelector('.signup-imap-port').value),
            username: form.querySelector('.signup-imap-username').value,
            password: form.querySelector('.signup-imap-password').value,
            use_ssl: form.querySelector('.signup-imap-use-ssl').checked
        };
        
        // Store form data for later use
        signupData = formData;
        signupType = 'imap';
        
        // Show password modal
        document.getElementById('modal-email').value = formData.email;
        document.getElementById('password-modal').classList.remove('hidden');
        document.getElementById('modal-password').focus();
    }
});

// Handle original home form (for backward compatibility)
document.getElementById('home-gmail-connect')?.addEventListener('click', function() {
    const email = prompt('{% trans "Please enter your Gmail address:" %}');
    if (!email || !email.includes('@')) {
        return;
    }
    
    signupData = { email: email };
    signupType = 'gmail';
    
    document.getElementById('modal-email').value = email;
    document.getElementById('password-modal').classList.remove('hidden');
    document.getElementById('modal-password').focus();
});

document.getElementById('home-imap-form')?.addEventListener('submit', function(e) {
    e.preventDefault();
    
    const termsChecked = document.getElementById('home-imap-terms')?.checked;
    const errorDiv = document.getElementById('home-imap-error');
    
    if (!termsChecked) {
        if (errorDiv) {
            errorDiv.textContent = '{% trans "You must agree to the Terms of Service to continue" %}';
            errorDiv.classList.remove('hidden');
        }
        return;
    }
    
    const formData = {
        email: document.getElementById('home-imap-email').value,
        host: document.getElementById('home-imap-host').value,
        port: parseInt(document.getElementById('home-imap-port').value),
        username: document.getElementById('home-imap-username').value,
        password: document.getElementById('home-imap-password').value,
        use_ssl: document.getElementById('home-imap-use-ssl').checked
    };
    
    signupData = formData;
    signupType = 'imap';
    
    document.getElementById('modal-email').value = formData.email;
    document.getElementById('password-modal').classList.remove('hidden');
    document.getElementById('modal-password').focus();
});

// Handle password modal submission
document.getElementById('modal-submit-btn')?.addEventListener('click', function() {
    const password = document.getElementById('modal-password').value;
    const termsChecked = document.getElementById('modal-terms')?.checked;
    const errorDiv = document.getElementById('modal-error');
    
    if (!password || password.length < 6) {
        errorDiv.textContent = '{% trans "Password must be at least 6 characters long" %}';
        errorDiv.classList.remove('hidden');
        return;
    }
    
    if (!termsChecked) {
        errorDiv.textContent = '{% trans "You must agree to the Terms of Service to continue" %}';
        errorDiv.classList.remove('hidden');
        return;
    }
    
    // Disable button and show loading
    const btn = document.getElementById('modal-submit-btn');
    btn.disabled = true;
    btn.textContent = '{% trans "Creating Account..." %}';
    
    // Get CSRF token
    const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;
    
    // Prepare submit data
    const submitData = {
        ...signupData,
        account_password: password
    };
    
    // Determine API endpoint
    const apiUrl = signupType === 'gmail' 
        ? '/api/gmail/quick-signup/' 
        : '/api/gmail/imap/quick-signup/';
    
    // Submit to API
    fetch(apiUrl, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': csrftoken
        },
        body: JSON.stringify(submitData)
    })
    .then(response => response.json())
    .then(data => {
        if (data.error) {
            if (data.error_type === 'app_password_required' && data.help_links) {
                // Special handling for app password error
                errorDiv.innerHTML = `
                    <div class="bg-amber-50 border-l-4 border-amber-400 p-3 rounded-r-lg">
                        <div class="flex items-start">
                            <div class="flex-shrink-0">
                                <svg class="h-5 w-5 text-amber-400" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                                </svg>
                            </div>
                            <div class="ml-3 flex-1">
                                <p class="text-sm font-medium text-amber-800 mb-2">${data.error}</p>
                                <div class="text-xs text-amber-700 space-y-1">
                                    <p class="font-semibold mb-1">{% trans "To fix this:" %}</p>
                                    <ol class="list-decimal list-inside space-y-1 ml-2">
                                        <li>{% trans "Enable 2-Step Verification on your Google Account" %}</li>
                                        <li>{% trans "Generate an App Password for IMAP access" %}</li>
                                        <li>{% trans "Use the App Password instead of your regular password" %}</li>
                                    </ol>
                                    <div class="mt-2 flex flex-wrap gap-2">
                                        <a href="${data.help_links.support}{% if agent %}?agent={{ agent }}{% endif %}" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-xs font-semibold text-amber-800 hover:text-amber-900 underline">
                                            <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                            </svg>
                                            {% trans "Learn More" %}
                                        </a>
                                        <a href="${data.help_links.app_passwords}{% if agent %}?agent={{ agent }}{% endif %}" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-xs font-semibold text-amber-800 hover:text-amber-900 underline">
                                            <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                                            </svg>
                                            {% trans "Create App Password" %}
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                errorDiv.textContent = data.error;
            }
            errorDiv.classList.remove('hidden');
            btn.disabled = false;
            btn.textContent = '{% trans "Create Account & Connect" %}';
        } else if (data.auth_url) {
            // For Gmail, redirect to OAuth
            window.location.href = data.auth_url;
        } else {
            // For IMAP, redirect to dashboard
            window.location.href = data.redirect_url || '/dashboard/';
        }
    })
    .catch(error => {
        errorDiv.textContent = '{% trans "An error occurred. Please try again." %}';
        errorDiv.classList.remove('hidden');
        btn.disabled = false;
        btn.textContent = '{% trans "Create Account & Connect" %}';
    });
});

// Close modal function
function closePasswordModal() {
    document.getElementById('password-modal').classList.add('hidden');
    document.getElementById('modal-password').value = '';
    const modalTerms = document.getElementById('modal-terms');
    if (modalTerms) {
        modalTerms.checked = false;
    }
    document.getElementById('modal-error').classList.add('hidden');
    signupData = null;
    signupType = null;
}

// Allow Enter key to submit password
document.getElementById('modal-password')?.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        document.getElementById('modal-submit-btn').click();
    }
});
</script>
{% endblock %}
